{
    "$schema": "https://www.krakend.io/schema/v3.json",
    "version": 3,
    "name": "Medix Hub - API Gateway",
    "timeout": "3000ms",
    "cache_ttl": "300s",
    "port": 8000,
    "extra_config": {
      "security/cors": {
        "allow_origins": [
          "*"
        ],
        "expose_headers": [
          "Content-Length"
        ],
        "max_age": "12h",
        "allow_methods": [
          "GET",
          "POST",
          "PUT",
          "DELETE",
          "OPTIONS"
        ]
      },
      "security/http": {
        "allowed_hosts": [],
        "content_type_nosniff": true,
        "browser_xss_filter": true
      },
      "grpc": {
        "@comment": "The catalog loads all .pb files passed or contained in directories",
        "catalog": [
          "pb-files/patient.pb"
        ]
      },
      "telemetry/logging": {
        "level": "DEBUG",
        "prefix": "[KRAKEND]",
        "syslog": false,
        "stdout": true,
        "format": "default",
        "syslog_facility": "local3"
      }
    },
    "endpoints": [
        {
          "@comment": "Feature: GRPC",
          "endpoint": "/v1/patient",
          "input_query_strings": ["*"],
          "backend": [
            {
              "host": ["localhost:8081"],
              "url_pattern": "PatientProto/GetAllPatient",
              "extra_config": {
                "backend/grpc": {
                    "client_tls": {
                        "@comment": "Allow untrusted certificates in development stage",
                        "allow_insecure_connections": true
                    }
                }
            }
            }
          ]
        }
      ]
}